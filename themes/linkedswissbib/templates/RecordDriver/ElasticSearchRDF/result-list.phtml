<? //based on themes/sbvfrd/templates/RecordDriver/SolrDefault/result-list.phtml ?>

<?php
/** @var    Swissbib\RecordDriver\SolrMarc $record */
/** @var    Swissbib\View\Helper\Record $viewRecord */
$record = $this->driver;
$viewRecord = $this->record($this->driver);

$thumbnail = $viewRecord->getThumbnail('small');
$detailLink = $this->recordLink()->getUrl($record);
//$titleStatement = $record->getTitleStatement(true);
$titleStatement = 'titleStatement';
//$shortTitle = $record->getShortTitle();
$shortTitle = 'shortTitle';
//$subtitle = $viewRecord->getSubtitle($titleStatement);
$subtitle = 'subtitle';
//$responsible = $viewRecord->getResponsible($titleStatement, $record);
$responsible = 'responsible';
//$edition = $record->getEdition();
$edition = 'edition';
//$summDate = $record->getHumanReadablePublicationDates();
$summDate = 'summDate';
//$hostitems = $record->getHostItemEntry();
$hostitems = array();
//$journalTitle = $record->getContainerTitle();
$journalTitle = '';
//$groupID = $record->getGroup(true);
$groupID = 'groupID';
$uniqueID = $record->getUniqueID();
//$uniqueID = 'uniqueID';

$nameAsLabel = $this->driver->getNameAsString();
$birthDate = $this->driver->getBirthDate();
$deathDate = $this->driver->getBirthDate();

$showFRBR = $this->configAccess()->Site->displayFrbr;
$memorizeLink = $this->recordLink()->getActionUrl($this->driver, 'Save');
$formats = $viewRecord->getFormatList();

?>
<div class="<?=$this->driver->supportsAjaxStatus()?'ajaxItem ':''?>col-xs-11 gutter-1">
  <input type="hidden" value="<?=$this->escapeHtmlAttr($this->driver->getUniqueID())?>" class="hiddenId" />
  <input type="hidden" value="<?=$this->escapeHtmlAttr($this->driver->getResourceSource())?>" class="hiddenSource" />

  <div class="hidden-xs col-sm-3 col-md-2 no-gutter hidden-print">
    <a href="<?=$this->recordLink()->getUrl($this->driver)?>" class="img-responsive">
      <? if ( !($thumbnail === false) ):  ?>
        <img alt="<?= $this->escapeHtml($nameAsLabel) ?>" class="recordcover" src="<?= $thumbnail ?>"/>
      <? else: ?>
		  <div class="thumbico <?= $viewRecord->getThumbnailPlaceholder() ?>"></div>
      <? endif; ?>
    </a>
  </div>

  <!-- Kurztitel (vorher class="col-xs-7 col-sm-8 col-md-7" -->
  <div class="col-xs-10 col-sm-8 col-md-7">
    <div>
        <h2>
                <a href="/sbrd/Exploration/AuthorDetails?lookfor=<?echo $uniqueID?>&type=AuthorForId" class="title singleLinkForBulk" title="<?= $this->escapeHtml($nameAsLabel) ?>">
                <?= $this->escapeHtml($nameAsLabel) ?>
            </a>
        </h2>
    </div>

    <!-- Untertitel und Verfasserangabe -->
    <div class="meta">
       <? if (isset($birthDate)): ?>
        <span id="subtitle"><?= $this->escapeHtml($birthDate . " - " .  $deathDate) ?></span><br />
       <? endif; ?>
<!--        <?/* if ($responsible): */?>
            <span class="hidden-xs label"><strong><?/*= $this->transEsc('Author') */?>:</strong></span>
            <span>
               <?/*= $this->escapeHtml($responsible) */?>
            </span><br />
        --><?/* endif; */?>
    </div>

   <!-- <!-- Zeitschriftentitel, Erscheinungsjahr -->
    <div class="meta">
        <?/* if ($hostitems): */?>
            <?/* foreach ($hostitems as $hostitem): */?>
                <?/* if (array_key_exists('title', $hostitem)): */?>
                    <span class="hidden-xs label"><strong><?/*= $this->transEsc('note_773') */?>:</strong></span>
                    <?/* $text = array_key_exists('related', $hostitem) ? $hostitem['title'] . ', ' . $hostitem['related'] : $hostitem['title'] */?>
                    <span><?/*= $this->escapeHtml($text) */?></span><br />
                <?/* endif; */?>
            <?/* endforeach; */?>
        <?/* endif; */?>
        <?/* if ($journalTitle): */?>
            <span class="hidden-xs label"><strong><?/*= $this->transEsc('Published in')*/?>:</strong></span>
            <span><a href="<?/*= $viewRecord->getLink('journaltitle', $journalTitle)*/?>"><?/*= $this->escapeHtml($journalTitle)*/?></a></span><br />
        <?/* endif; */?>
        <?/* if ($summDate): */?>
        <span class="hidden-xs label"><strong><?/*= $this->transEsc('Year') */?>:</strong></span>
        <span><?/*= $this->escapeHtml($summDate[0]) */?></span><br />
        <?/* endif; */?>
        <?/* if ($edition): */?>
             <span class="hidden-xs label"><strong><?/*= $this->transEsc('Edition') */?>:</strong></span>
             <span><?/*= $this->escapeHtml($edition) */?></span><br />
        <?/* endif; */?>
    </div>

    <!-- ID -->
    <div class="meta visible-print-block">
      <? if ($uniqueID): ?>
        <span class="hidden-xs label"><strong><?= $this->transEsc('Item_ID') ?>:</strong></span>
        <span><?= $uniqueID ?></span><br />
      <? endif; ?>
    </div>

<!--    <!-- Medien-Typ -->
    <div class="meta">
      <?/* if (!empty($formats)): */?>
        <span class="hidden-xs label"><strong><?/*= $this->transEsc('Format') */?>:</strong></span>
        <span><?/*= $formats */?></span><br />
      <?/* endif; */?>
    </div>

  </div>

  <div class="col-xs-1 col-md-3 actions">
    <div>
        <? if ($this->driver->displayHoldings()): ?>
            <?= $this->render('search/results/available.phtml') ?>
            <?= $this->render('search/results/libraries.phtml') ?>
        <? elseif ($this->driver->displayLinks()): ?>
            <?= $this->render('search/results/links.phtml') ?>
        <? endif; ?>

      <?/* if (!empty($showFRBR) && $showFRBR && !empty($groupID) && !strcmp($results->getParams()->getSearchHandler(), 'FRBR') == 0) : */?><!--
        <a class="btn btn-primary btn-frbr hidden-print" href="<?/*= $this->url('search-results') . '?lookfor=' . $groupID . "&type=FRBR&limit=" . $results->getParams()->getLimit() . "&sort=publishDateSort+desc" */?>"
           title="<?/*= $this->transEsc('Other Editions') */?>">
          <span><i class="fa fa-eye"></i></span>
          <span class="hidden-xs hidden-sm"><?/*= $this->transEsc('Other Editions') */?></span>
        </a>
      --><?/* endif; */?>

      <? if ($this->userlist()->getMode() !== 'disabled'): ?>
        <!--<a class="btn btn-primary hidden-print" href="<?/*= $this->recordLink()->getActionUrl($this->driver, 'Save'); */?>" title="<?/*= $this->transEsc('Add to favorites') */?>">
          <span class="memorizelistadd"><i class="fa fa-list-ul"></i></span>
          <span class="hidden-xs hidden-sm"><?/*= $this->transEsc('List') */?></span>
        </a>-->
            <? /* Saved lists */ ?>
            <div class="savedLists alert alert-info hidden hidden-xs hidden-sm hidden-print">
                <strong><?=$this->transEsc('Saved in')?>:</strong>
            </div>
      <? endif; ?>



      <? if ($this->isFavoriteInstitution($record->getInstitutions())): ?>
         <!--<i class="fa fa-heart"></i>
          <img class="hidden-print" src="<?= $this->basePath('themes/swissbib/images/icon_favorit_library.gif') ?>"
                 alt="Favourite library icon (heart)" class="favourite-library">-->
      <? endif; ?>

    </div>
  </div>
    <!-- COINS -->
    <span class="Z3988 hidden-print" title="<?= $this->escapeHtml($record->getOpenURL()) ?>"></span>
</div>
